2019B - All Pairs SegmentsAuthor: TheScrasse Preparation: TheScrasse Hint 1Can you determine fast how many intervals contain point p? Hint 2The intervals that contain point p are the ones with l≤p and r≥p. Hint 3Determine how many intervals contain:  point x1; points x1+1,…,x2−1; point x2; … point xn.  SolutionFirst, let's focus on determining how many intervals contain some point x. These intervals are the ones with l≤x and x≤r.So a point xi<p<xi+1 satisfies x1≤p,…,xi≤p, and p≤xi+1,…,p≤xn. It means that you have found xi+1−xi−1 points contained in exactly i(n−i) intervals (because there are i possible left endpoints and n−i possible right endpoints).Similarly, the point p=xi is contained in i(n−i+1)−1 intervals (you have to remove interval [xi,xi], which you do not draw).So you can use a map that stores how many points are contained in exactly x intervals, and update the map in the positions i(n−i) and i(n−i+1)−1.Complexity: O(nlogn)